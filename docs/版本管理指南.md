# 版本管理指南

> 如何使用和切换项目的不同版本

## 📦 版本列表

本项目使用Git进行版本管理，每个重要版本都打上了标签，方便切换和回退。

| 版本号 | 发布日期 | 说明 | 提交ID |
|--------|---------|------|--------|
| **v1.2.0** | 2024-12-02 | 🌟 **当前最新版本** - 文档体系重建+测试数据优化 | `b833958` |
| v1.1.0 | 2024-12-02 | 等保二级安全改造完成 | `335d2d2` |
| v1.0.0 | 2024-12-02 | 功能完整版（所有CRUD功能完成） | `ea2d97c` |
| v0.1.0 | 2024-12-02 | 初始版本（项目框架搭建） | `2c49456` |

---

## 🔍 方法一：查看历史版本（只读模式）

适合**只想查看**历史版本代码，不做修改的场景。

### 1. 查看特定版本

```bash
# 使用版本号查看
git checkout v1.0.0

# 或使用提交ID查看
git checkout ea2d97c
```

此时会进入"分离HEAD"状态，可以查看代码但不建议修改。

### 2. 返回最新版本

```bash
git checkout master
```

### 示例：查看初始版本

```bash
# 查看最早的版本
git checkout v0.1.0

# 查看项目结构
ls

# 返回最新版本
git checkout master
```

---

## 🌿 方法二：创建版本分支（推荐用于开发）

适合想要**基于历史版本进行开发**的场景。

### 1. 基于历史版本创建新分支

```bash
# 基于v1.0.0创建新分支（不含等保改造）
git checkout -b feature-simple v1.0.0

# 基于v0.1.0创建新分支（最简版本）
git checkout -b minimal-version v0.1.0
```

### 2. 在新分支上开发

```bash
# 现在可以在这个分支上自由开发
# 修改代码...

# 提交更改
git add .
git commit -m "在v1.0.0基础上添加新功能"
```

### 3. 切换回主分支

```bash
git checkout master
```

### 4. 查看所有分支

```bash
git branch --list
```

---

## 📥 方法三：导出特定版本（用于分发）

适合**需要将特定版本打包给其他人使用**的场景。

### 方案A：导出为压缩包

```bash
# 导出v1.0.0版本为zip文件
git archive --format=zip --output=科研管理系统-v1.0.0.zip v1.0.0

# 导出v0.1.0版本为tar.gz文件
git archive --format=tar.gz --output=科研管理系统-v0.1.0.tar.gz v0.1.0
```

### 方案B：克隆特定版本到新目录

```bash
# 克隆整个仓库到新目录
git clone . ../科研管理系统-v1.0.0
cd ../科研管理系统-v1.0.0

# 切换到v1.0.0版本
git checkout v1.0.0

# 删除git历史（可选，用于分发）
rm -rf .git
```

---

## 🔄 方法四：回退到历史版本（慎用）

⚠️ **警告**：此操作会**永久删除**当前版本之后的所有提交，仅在确定要废弃新版本时使用！

### 1. 软回退（保留代码更改）

```bash
# 回退到v1.0.0，但保留之后的代码更改
git reset --soft v1.0.0

# 查看状态（会看到之后的所有更改）
git status

# 如果确认要重新提交
git commit -m "基于v1.0.0重新开始"
```

### 2. 硬回退（完全删除）

```bash
# ⚠️ 危险操作：完全回退到v1.0.0，删除之后的所有更改
git reset --hard v1.0.0

# 强制推送到远程（如果需要）
git push origin master --force
```

**🚨 重要提示**：硬回退会导致数据丢失，操作前务必备份！

---

## 📊 版本对比

### 1. 对比两个版本的差异

```bash
# 对比v1.0.0和v1.2.0的差异
git diff v1.0.0..v1.2.0

# 对比v1.0.0和v1.2.0的文件列表
git diff --name-only v1.0.0..v1.2.0

# 查看统计信息
git diff --stat v1.0.0..v1.2.0
```

### 2. 查看版本间的提交日志

```bash
# 查看v1.0.0到v1.2.0之间的所有提交
git log v1.0.0..v1.2.0 --oneline

# 查看详细信息
git log v1.0.0..v1.2.0
```

---

## 📖 各版本特性对比

### v0.1.0 - 初始版本

**包含内容**：
- ✅ 项目框架搭建
- ✅ 基础目录结构
- ✅ 初始配置文件

**适合场景**：
- 学习项目从零搭建的过程
- 作为最小可运行版本的参考

---

### v1.0.0 - 功能完整版

**包含内容**：
- ✅ 所有CRUD功能完成
- ✅ 用户管理（简单版）
- ✅ 项目管理
- ✅ 论文管理
- ✅ 经费管理
- ✅ 成果管理
- ✅ 统计分析
- ✅ 基础的用户认证
- ❌ 不含等保二级安全特性
- ❌ 测试数据较少（11条）
- ❌ 文档不完整

**适合场景**：
- 不需要等保二级合规的场景
- 学习基础功能实现
- 作为简化版本使用

**默认账号**（密码较简单）：
- admin / admin123
- teacher / 123456
- secretary / 123456

---

### v1.1.0 - 等保二级安全版

**包含内容**：
- ✅ v1.0.0的所有功能
- ✅ **等保二级安全改造完成**
- ✅ 密码复杂度策略（8位+大小写+数字+特殊字符）
- ✅ 密码定期更换提醒（90天）
- ✅ 登录失败锁定机制（5次/30分钟）
- ✅ 完整的操作审计日志
- ✅ 会话管理和超时控制
- ✅ 增强的权限验证
- ❌ 测试数据仍较少
- ❌ 文档不完整

**适合场景**：
- 需要符合等保二级标准的项目
- 对安全性有较高要求的场景
- 政府、高校、企业正式项目

**默认账号**（强密码）：
- admin / Admin@123
- teacher / Teacher@123
- secretary / Sec@2024

---

### v1.2.0 - 文档优化版（当前最新）

**包含内容**：
- ✅ v1.1.0的所有功能
- ✅ **完整的中文文档体系**（约4000行）
  - 快速开始指南
  - 完整部署指南（Windows/Linux/Docker）
  - 数据库设计文档
  - 开发指南
  - 安全规范
  - 版本管理指南
- ✅ **丰富的测试数据**（88条，增长700%）
  - 10个用户（8个学院）
  - 12个项目（覆盖所有状态）
  - 20篇论文（Q1-Q4分区）
  - 30条经费记录（7种类型）
  - 16项成果（4种类型）
- ✅ 一键启动脚本优化
- ✅ 统一的密码策略

**适合场景**：
- 生产环境部署
- 团队协作开发
- 二次开发和功能扩展
- 教学和演示
- 项目交付

**推荐理由**：
- 📚 文档最完整
- 🎯 测试数据最丰富
- 🔒 安全性最高
- 🚀 易于上手和部署

---

## 🎯 推荐使用场景

### 场景1：快速学习项目结构

```bash
# 从最简单的版本开始
git checkout v0.1.0

# 逐步学习每个版本的变化
git checkout v1.0.0
git checkout v1.1.0
git checkout v1.2.0
```

### 场景2：不需要等保二级的简化部署

```bash
# 切换到功能完整但不含等保的版本
git checkout v1.0.0

# 创建独立分支继续开发
git checkout -b simplified-version v1.0.0
```

### 场景3：生产环境正式部署

```bash
# 使用最新的完整版本
git checkout v1.2.0

# 或直接使用master分支
git checkout master
```

### 场景4：分发给其他开发者

```bash
# 导出v1.2.0版本为压缩包
git archive --format=zip --output=科研管理系统-v1.2.0-完整版.zip v1.2.0

# 导出v1.0.0简化版本
git archive --format=zip --output=科研管理系统-v1.0.0-简化版.zip v1.0.0
```

---

## 💡 最佳实践

### 1. 版本选择建议

| 需求 | 推荐版本 | 原因 |
|------|---------|------|
| 生产环境部署 | **v1.2.0** | 功能最完整，文档最全面 |
| 学习和教学 | **v1.2.0** | 测试数据丰富，易于演示 |
| 简化部署 | v1.0.0 | 不含等保改造，更简单 |
| 等保合规项目 | v1.1.0 或 v1.2.0 | 符合等保二级标准 |
| 学习项目搭建 | v0.1.0 → v1.2.0 | 逐步学习演进过程 |

### 2. 版本命名规范

本项目遵循**语义化版本**（Semantic Versioning）：

```
v主版本号.次版本号.修订号

例如：v1.2.0
- 主版本号(1)：重大功能变更
- 次版本号(2)：新增功能
- 修订号(0)：Bug修复
```

### 3. 安全提示

⚠️ **使用历史版本时的注意事项**：

1. **v0.1.0 和 v1.0.0 的默认密码较弱**，不适合生产环境
2. **v1.0.0 不含等保二级安全特性**，缺少审计日志和密码策略
3. **v1.0.0 测试数据很少**，不适合用于演示和测试
4. **生产环境强烈推荐使用 v1.2.0 或更新版本**

---

## 📞 获取帮助

### 查看版本详细信息

```bash
# 查看某个版本的详细说明
git show v1.2.0

# 查看版本标签列表
git tag -l

# 查看版本差异
git diff v1.0.0 v1.2.0
```

### 常见问题

**Q: 如何确认当前使用的版本？**

```bash
# 查看当前HEAD指向
git describe --tags

# 或查看当前分支
git branch
```

**Q: 切换版本后如何返回最新版本？**

```bash
git checkout master
```

**Q: 如何删除某个标签？**

```bash
# 删除本地标签
git tag -d v1.0.0

# 删除远程标签
git push origin :refs/tags/v1.0.0
```

---

## 🔗 相关文档

- [快速开始指南](./快速开始.md)
- [部署指南](./部署指南.md)
- [开发指南](./开发指南.md)
- [安全规范](./安全规范.md)

---

**最后更新**: 2024-12-02  
**当前最新版本**: v1.2.0
