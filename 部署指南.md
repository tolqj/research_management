# ç§‘ç ”ç®¡ç†ç³»ç»Ÿéƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
2. [æ•°æ®åº“é…ç½®](#æ•°æ®åº“é…ç½®)
3. [åç«¯éƒ¨ç½²](#åç«¯éƒ¨ç½²)
4. [å‰ç«¯éƒ¨ç½²](#å‰ç«¯éƒ¨ç½²)
5. [ç”Ÿäº§ç¯å¢ƒé…ç½®](#ç”Ÿäº§ç¯å¢ƒé…ç½®)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç¯å¢ƒå‡†å¤‡

### ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, Linux, macOS
- **Python**: 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**: 16.x æˆ–æ›´é«˜ç‰ˆæœ¬
- **MySQL**: 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬

### å®‰è£…Python

**Windows:**
1. è®¿é—® https://www.python.org/downloads/
2. ä¸‹è½½ Python 3.10+ å®‰è£…åŒ…
3. å®‰è£…æ—¶å‹¾é€‰"Add Python to PATH"

**éªŒè¯å®‰è£…:**
```bash
python --version
pip --version
```

### å®‰è£…Node.js

**Windows:**
1. è®¿é—® https://nodejs.org/
2. ä¸‹è½½LTSç‰ˆæœ¬
3. è¿è¡Œå®‰è£…ç¨‹åº

**éªŒè¯å®‰è£…:**
```bash
node --version
npm --version
```

### å®‰è£…MySQL

**Windows:**
1. è®¿é—® https://dev.mysql.com/downloads/installer/
2. ä¸‹è½½MySQL Installer
3. å®‰è£…æ—¶è®°ä½rootå¯†ç ï¼ˆå»ºè®®è®¾ä¸º`root`ä»¥åŒ¹é…é»˜è®¤é…ç½®ï¼‰

**éªŒè¯å®‰è£…:**
```bash
mysql --version
```

---

## æ•°æ®åº“é…ç½®

### 1. åˆ›å»ºæ•°æ®åº“ï¼ˆæ‰‹åŠ¨æ–¹å¼ï¼‰

ç™»å½•MySQL:
```bash
mysql -u root -p
```

æ‰§è¡ŒSQL:
```sql
CREATE DATABASE research_management_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
SHOW DATABASES;
EXIT;
```

### 2. ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

**Windows:**
```bash
cd backend
setup_database.bat
```

**Linux/macOS:**
```bash
cd backend
python setup_database.py
```

è„šæœ¬å°†è‡ªåŠ¨ï¼š
- åˆ›å»ºæ•°æ®åº“
- ç”Ÿæˆæ‰€æœ‰è¡¨ç»“æ„
- æ’å…¥æµ‹è¯•æ•°æ®ï¼ˆ3ä¸ªç”¨æˆ·ã€2ä¸ªé¡¹ç›®ç­‰ï¼‰

### 3. éªŒè¯æ•°æ®åº“

```sql
USE research_management_system;
SHOW TABLES;
SELECT * FROM users;
```

---

## åç«¯éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ

#### 1. å®‰è£…ä¾èµ–
```bash
cd backend
pip install -r requirements.txt
```

#### 2. é…ç½®æ•°æ®åº“è¿æ¥

ç¼–è¾‘ `backend/database.py`:
```python
MYSQL_USER = "root"          # ä¿®æ”¹ä¸ºä½ çš„MySQLç”¨æˆ·å
MYSQL_PASSWORD = "root"      # ä¿®æ”¹ä¸ºä½ çš„MySQLå¯†ç 
MYSQL_HOST = "localhost"     # æ•°æ®åº“ä¸»æœº
MYSQL_PORT = "3306"          # æ•°æ®åº“ç«¯å£
MYSQL_DATABASE = "research_management_system"
```

#### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
python main.py
```

è®¿é—®: http://localhost:8000/api/docs

### ç”Ÿäº§ç¯å¢ƒ

#### 1. å®‰å…¨é…ç½®

ä¿®æ”¹ `backend/utils/security.py`:
```python
SECRET_KEY = "ä½ çš„è¶…çº§å®‰å…¨å¯†é’¥-è‡³å°‘32ä½éšæœºå­—ç¬¦"
```

ç”Ÿæˆå®‰å…¨å¯†é’¥:
```python
import secrets
print(secrets.token_urlsafe(32))
```

#### 2. ä½¿ç”¨Gunicornï¼ˆLinuxç”Ÿäº§æ¨èï¼‰

å®‰è£…:
```bash
pip install gunicorn
```

å¯åŠ¨:
```bash
gunicorn main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000
```

#### 3. ä½¿ç”¨Uvicornï¼ˆè·¨å¹³å°ï¼‰

```bash
uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4
```

#### 4. ä½¿ç”¨è¿›ç¨‹ç®¡ç†å™¨ï¼ˆæ¨èï¼‰

**Supervisorï¼ˆLinuxï¼‰é…ç½®ç¤ºä¾‹:**

åˆ›å»º `/etc/supervisor/conf.d/rms.conf`:
```ini
[program:rms-backend]
command=/path/to/venv/bin/uvicorn main:app --host 0.0.0.0 --port 8000
directory=/path/to/backend
user=www-data
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/rms-backend.log
```

å¯åŠ¨:
```bash
supervisorctl reread
supervisorctl update
supervisorctl start rms-backend
```

---

## å‰ç«¯éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ

#### 1. å®‰è£…ä¾èµ–
```bash
cd frontend
npm install
```

#### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

è®¿é—®: http://localhost:5173

### ç”Ÿäº§ç¯å¢ƒ

#### 1. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
cd frontend
npm run build
```

æ„å»ºäº§ç‰©ä½äº `frontend/dist` ç›®å½•

#### 2. ä½¿ç”¨Nginxéƒ¨ç½²

å®‰è£…Nginxï¼ˆWindows/Linuxï¼‰

**Nginxé…ç½®ç¤ºä¾‹** (`/etc/nginx/sites-available/rms`):

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /path/to/frontend/dist;
        try_files $uri $uri/ /index.html;
    }
    
    # åç«¯APIä»£ç†
    location /api {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # å‹ç¼©é…ç½®
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml;
}
```

å¯ç”¨ç«™ç‚¹:
```bash
ln -s /etc/nginx/sites-available/rms /etc/nginx/sites-enabled/
nginx -t
systemctl reload nginx
```

#### 3. HTTPSé…ç½®ï¼ˆæ¨èï¼‰

ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦:

```bash
apt install certbot python3-certbot-nginx
certbot --nginx -d your-domain.com
```

---

## ç”Ÿäº§ç¯å¢ƒé…ç½®

### 1. é˜²ç«å¢™é…ç½®

**å¼€æ”¾å¿…è¦ç«¯å£:**
```bash
# Linux (ufw)
ufw allow 80/tcp
ufw allow 443/tcp

# Windowsé˜²ç«å¢™æ‰‹åŠ¨é…ç½®
```

### 2. æ•°æ®åº“ä¼˜åŒ–

**MySQLé…ç½®** (`my.cnf`):
```ini
[mysqld]
max_connections = 200
innodb_buffer_pool_size = 1G
query_cache_size = 64M
```

### 3. å®šæ—¶å¤‡ä»½æ•°æ®åº“

**Linux Cronä»»åŠ¡:**
```bash
crontab -e
```

æ·»åŠ :
```bash
0 2 * * * mysqldump -u root -proot research_management_system > /backup/rms_$(date +\%Y\%m\%d).sql
```

**Windowsè®¡åˆ’ä»»åŠ¡:**
```batch
mysqldump -u root -proot research_management_system > C:\backup\rms_%date:~0,4%%date:~5,2%%date:~8,2%.sql
```

### 4. ç›‘æ§å’Œæ—¥å¿—

**åç«¯æ—¥å¿—é…ç½®:**

å®‰è£…:
```bash
pip install python-json-logger
```

é…ç½®loggingï¼ˆåœ¨`main.py`æ·»åŠ ï¼‰:
```python
import logging
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    filename='rms.log'
)
```

---

## å¸¸è§é—®é¢˜

### Q1: æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯:** `pymysql.err.OperationalError: (2003, "Can't connect to MySQL server")`

**è§£å†³:**
1. æ£€æŸ¥MySQLæ˜¯å¦è¿è¡Œ: `systemctl status mysql`
2. éªŒè¯è´¦å·å¯†ç æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦é˜»æ­¢3306ç«¯å£

### Q2: å‰ç«¯æ— æ³•è®¿é—®åç«¯API

**è§£å†³:**
1. æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨: `http://localhost:8000/api/health`
2. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰CORSé”™è¯¯
3. ç¡®è®¤`main.py`ä¸­CORSé…ç½®åŒ…å«å‰ç«¯åœ°å€

### Q3: npm install å¤±è´¥

**è§£å†³:**
1. æ¸…é™¤npmç¼“å­˜: `npm cache clean --force`
2. åˆ é™¤`node_modules`å’Œ`package-lock.json`é‡æ–°å®‰è£…
3. åˆ‡æ¢npmé•œåƒ: `npm config set registry https://registry.npmmirror.com`

### Q4: Pythonä¾èµ–å®‰è£…å¤±è´¥

**è§£å†³:**
1. å‡çº§pip: `python -m pip install --upgrade pip`
2. ä½¿ç”¨å›½å†…é•œåƒ: `pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple`

### Q5: æƒé™ä¸è¶³é”™è¯¯

**Linuxæƒé™é—®é¢˜:**
```bash
chmod +x setup_database.py
chown -R www-data:www-data /path/to/project
```

---

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ•°æ®åº“ç´¢å¼•**: å·²åœ¨modelsä¸­å®šä¹‰ï¼Œç¡®ä¿ç”Ÿæ•ˆ
2. **Redisç¼“å­˜**: å¯é€‰ï¼Œç¼“å­˜ç»Ÿè®¡æ•°æ®
3. **CDNåŠ é€Ÿ**: å‰ç«¯é™æ€èµ„æºä½¿ç”¨CDN
4. **è´Ÿè½½å‡è¡¡**: å¤šå°æœåŠ¡å™¨éƒ¨ç½²Nginx+åç«¯é›†ç¾¤

---

## å®‰å…¨å»ºè®®

âœ… **å¿…é¡»æ‰§è¡Œ**:
1. ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†ç 
2. ä¿®æ”¹JWT SECRET_KEY
3. å¯ç”¨HTTPS
4. å®šæœŸå¤‡ä»½æ•°æ®åº“
5. æ›´æ–°ä¾èµ–åŒ…ä¿®å¤æ¼æ´

âŒ **ç¦æ­¢**:
1. ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒå¼€å¯DEBUGæ¨¡å¼
2. ä¸è¦æš´éœ²æ•°æ®åº“ç«¯å£åˆ°å…¬ç½‘
3. ä¸è¦ä½¿ç”¨å¼±å¯†ç 

---

**éƒ¨ç½²æˆåŠŸåï¼Œè¯·è®¿é—®ç³»ç»Ÿå¹¶ä¿®æ”¹é»˜è®¤å¯†ç ï¼**

å¦‚æœ‰ç–‘é—®ï¼Œè¯·æŸ¥é˜…README.mdæˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚
